
#include "sys/alt_stdio.h"
#include "system.h"
#include "altera_avalon_pio_regs.h"
#include "stdint.h"
#include "sys/alt_sys_init.h"
#include "sys/alt_flash.h"
#include "peripheral/peripheral_linker.h"

uint8_t on_off = 1;		// For Toggling the LED

int main()
{ 
  alt_putstr("------- Welcome to EPCQ Read/ Write Programme! -------\n");
  alt_putstr("Please refer to the memory range for your EPCQ Device\n");

  // Perform Sanity Check on the EPCQ Controller
  epcq_controller_sanity_check();

  subsector_buffer[0] = 0x12;
  subsector_buffer[1] = 0x34;
  subsector_buffer[2] = 0x56;
  subsector_buffer[3] = 0x78;
  subsector_buffer[4] = 0x98;
  subsector_buffer[5] = 0x12;

  alt_epcq_controller2_write(&epcq_dev_ptr->dev, 0x000000, subsector_buffer, length);

  /* Event loop never exits. */
  while (1){
		IOWR(LED_BASE, 0, on_off);
		on_off = ~on_off;
		alt_busy_sleep(1000000);
  }

  return 0;
}

